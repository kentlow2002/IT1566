{% extends "base.html" %}
{% block title %} Welcome - X Store {% endblock %}
{% block navbar %}
{% include "includes/_navbarBuyer.html" %}
{% endblock %}
{% block content %}
{% from "includes/_formhelper.html" import render_field %}
  <div class="row justify-content-center">
    <div class="col-sm-7">
      <br>
      <h2>Checkout Page</h2>
      <form class="form" method="POST">
        <div class="row">
          <div class="col">
            {{ render_field(form.firstName,class='form-control') }}
          </div>
          <div class="col">
            {{ render_field(form.lastName,class='form-control') }}
          </div>
        </div>
        <div class="row">
          <div class="col">
            {{ render_field(form.cardNum,class='form-control') }}
          </div>
          <div class="col">
            {{ render_field(form.CVV,class='form-control') }}
          </div>
        </div>
        <div class="row">
          <div class="col">
            {{ render_field(form.expiryMonth,class='form-control') }}
          </div>
          <div class="col">
            {{ render_field(form.expiryYear,class='form-control') }}
          </div>
        </div>
        <div class="row">
          <div class="col">
            {{ render_field(form.shippingAddr,class='form-control') }}
          </div>
        </div>
        <button class="btn btn-primary" onclick="confirm('Are you sure you want to confirm this order?')">Purchase</button>

      </form>
    </div>
    <div class="col-sm-5">
      <table class='table'>
        <tr>
          <th>Product Name</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th>Subtotal</th>
        </tr>
          {% for i in range(productsList[0]|length) %}
            <tr>
              <td>{{ productsList[0][i].get_productName() }}</td>
              <td>{{ productsList[1][i] }}</td>
              <td>{{ productsList[0][i].get_productPrice() }}</td>
              <td>{{ productsList[0][i].get_productPrice()*productsList[1][i] }}</td>
            </tr>
          {% endfor %}
        <tr>
          <td><b>Total</b></td>
          <td></td>
          <td><b>{{ totalPrice }}</b></td>
        </tr>
      </table>
    </div>
  </div>

  {% endblock %}
